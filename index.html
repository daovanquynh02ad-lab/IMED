<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Imed - Биохимия Тренажёр</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'in': 'fadeIn 0.2s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { -webkit-tap-highlight-color: transparent; }
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-pb { padding-bottom: env(safe-area-inset-bottom, 20px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 transition-colors duration-300 min-h-screen">

<div id="app" class="max-w-md mx-auto min-h-screen relative flex flex-col">
    <!-- Content will be rendered here by JS -->
</div>

<script>
    // --- 1. DATA (354 Questions) ---
    // Данные восстановлены из контекста и текстового файла.
    // Структура: id, topic, question, options, correctIndex, explanation
    
    // Вспомогательная функция для создания данных, чтобы не дублировать код
    const createQ = (id, topic, q, opts, corr, expl = "См. учебник") => ({
        id, topic, question: q, options: opts, correctIndex: corr, explanation: expl
    });

    const TOPIC_4 = "Строение липидов";
    const TOPIC_17 = "Переваривание и транспорт липидов";
    const TOPIC_18 = "Липолиз и регуляция";
    const TOPIC_19 = "Окисление жирных кислот";
    const TOPIC_21 = "Обмен холестерина";
    const TOPIC_22 = "Обмен кетоновых тел";
    const TOPIC_23 = "Эйкозаноиды";

    const BIOCHEM_DATA = [
        // --- РАЗДЕЛ 4 (84 вопроса) ---
        createQ(401, TOPIC_4, "Выберите общее свойство всех липидов.", ['Наличие глицерола', 'Наличие стерана', 'Гидрофобность', 'Гидрофильность'], 2, "Липиды — это сборная группа органических соединений, нерастворимых в воде (гидрофобных)."),
        createQ(402, TOPIC_4, "Какие липиды наиболее гидрофобны?", ['Эфиры холестерина', 'Лецитины', 'ДАГ', 'Церамиды'], 0, "Эфиры холестерина — полностью неполярные молекулы."),
        createQ(403, TOPIC_4, "Какое соединение относится к липидам?", ['Глицерол', 'Карнитин', 'Ретинол', 'Глутатион'], 2, "Ретинол (витамин А) — жирорастворимый витамин, относится к липидам."),
        createQ(404, TOPIC_4, "Какое соединение относится к липидам?", ['Лецитин', 'Биотин', 'Пируват', 'Тиамин'], 0, "Лецитин (фосфатидилхолин) — сложный липид."),
        createQ(405, TOPIC_4, "Какие молекулы являются липидами?", ['Жирные кислоты', 'Воска', 'Стероиды', 'Все перечисленные'], 3, "Все указанные классы относятся к липидам."),
        createQ(406, TOPIC_4, "Какие соединения относятся к простым липидам?", ['ВЖК и воска', 'Сфинголипиды', 'Гликолипиды', 'Фосфолипиды'], 0, "Простые липиды (воска, жиры) гидролизуются до спирта и кислоты."),
        createQ(407, TOPIC_4, "Выберите верное утверждение о незаменимых ВЖК.", ['Имеют одну двойную связь', 'Имеют две и более двойных связей', 'Не имеют двойных связей', 'Синтезируются из витаминов'], 1, "Незаменимые (эссенциальные) кислоты полиненасыщены."),
        createQ(408, TOPIC_4, "Какая ВЖК относится к незаменимым?", ['Пальмитиновая', 'Стеариновая', 'Линоленовая', 'Арахиновая'], 2, "Линоленовая (омега-3) — незаменимая."),
        createQ(409, TOPIC_4, "Какая ВЖК является условно незаменимой?", ['Пальмитиновая', 'Стеариновая', 'Арахидоновая', 'Олеиновая'], 2, "Арахидоновая синтезируется из линолевой."),
        createQ(410, TOPIC_4, "Какая ВЖК относится к незаменимым?", ['Линолевая', 'Миристиновая', 'Пальмитоолеиновая', 'Олеиновая'], 0, "Линолевая (омега-6) — незаменимая."),
        createQ(411, TOPIC_4, "Какая ВЖК участвует в синтезе эйкозаноидов?", ['Стеариновая', 'Арахидоновая', 'Пальмитиновая', 'Олеиновая'], 1, "Арахидоновая кислота — субстрат для эйкозаноидов."),
        createQ(412, TOPIC_4, "Как называются радикалы ВЖК?", ['Ацетильные', 'Ацильные', 'Гликозидные', 'Метильные'], 1, "Радикал R-CO- называется ацил."),
        createQ(413, TOPIC_4, "Наиболее частый спирт в составе липидов.", ['Инозитол', 'Ретинол', 'Глицерол', 'Холестерин'], 2, "Глицерол — основа жиров и фосфолипидов."),
        createQ(414, TOPIC_4, "На какие группы делят сложные липиды по спирту?", ['Глицеро- и сфинголипиды', 'Терпены и ВЖК', 'Стероиды и воска', 'ВЖК и альдегиды'], 0, "На основе глицерола и сфингозина."),
        createQ(415, TOPIC_4, "Характеристика ацилглицеролов (ТАГ).", ['Положительный заряд', 'Отрицательный заряд', 'Амфотерные', 'Нейтральные'], 3, "Жиры (ТАГ) — нейтральные липиды."),
        createQ(416, TOPIC_4, "Свойство глицерофосфолипидов.", ['Гидрофобность', 'Гидрофильность', 'Амфифильность', 'Растворимость'], 2, "Имеют полярную головку и неполярный хвост."),
        createQ(417, TOPIC_4, "Что такое гликолипиды?", ['Производные сфингозина с фосфатом', 'ВЖК + углевод', 'Холестерин + углевод', 'Сфингозин + ВЖК + углевод'], 3, "Гликолипиды = Церамид + Углевод."),
        createQ(418, TOPIC_4, "Какими могут быть жирные кислоты?", ['Насыщенными и ненасыщенными', 'Фосфорными', 'Серными', 'Ароматическими'], 0, "Делятся по наличию двойных связей."),
        createQ(419, TOPIC_4, "Ненасыщенные кислоты имеют:", ['Только одинарные связи', 'Тройные связи', 'Ароматическое кольцо', 'Двойные связи'], 3, "Наличие двойных связей C=C."),
        createQ(420, TOPIC_4, "Пальмитиновая кислота (С16:0).", ['Содержит 16 атомов С', 'Содержит 18 атомов С', 'Субстрат ПГ', 'Имеет 3 двойные связи'], 0, "С16:0."),
        createQ(421, TOPIC_4, "ВЖК с 18 атомами углерода.", ['Миристиновая', 'Пальмитиновая', 'Стеариновая', 'Арахиновая'], 2, "Стеариновая — С18."),
        createQ(422, TOPIC_4, "Формула 18:0 соответствует:", ['Пальмитиновой', 'Стеариновой', 'Арахиновой', 'Миристиновой'], 1, "Стеариновая."),
        createQ(423, TOPIC_4, "Насыщенная ВЖК.", ['Арахидоновая', 'Стеариновая', 'Линолевая', 'Линоленовая'], 1, "Стеариновая (нет двойных связей)."),
        createQ(424, TOPIC_4, "Насыщенная ВЖК.", ['Пальмитиновая', 'Олеиновая', 'Линолевая', 'Линоленовая'], 0, "Пальмитиновая."),
        createQ(425, TOPIC_4, "Насыщенная ВЖК.", ['Стеариновая', 'Олеиновая', 'Линолевая', 'Арахидоновая'], 0, "Стеариновая."),
        createQ(426, TOPIC_4, "Насыщенная ВЖК.", ['Олеиновая', 'Пальмитоолеиновая', 'Стеариновая', 'Арахидоновая'], 2, "Стеариновая."),
        createQ(427, TOPIC_4, "Насыщенная ВЖК.", ['Олеиновая', 'Арахидоновая', 'Линоленовая', 'Пальмитиновая'], 3, "Пальмитиновая."),
        createQ(428, TOPIC_4, "Линоленовая кислота.", ['20 атомов С', '18 атомов С, 3 связи', 'Субстрат ПГ', '1 связь'], 1, "С18:3."),
        createQ(429, TOPIC_4, "Формула 18:2(9,12) это:", ['Линолевая', 'Линоленовая', 'Арахидоновая', 'Олеиновая'], 0, "Линолевая."),
        createQ(430, TOPIC_4, "Ненасыщенная ВЖК.", ['Стеариновая', 'Пальмитиновая', 'Олеиновая', 'Арахиновая'], 2, "Олеиновая (С18:1)."),
        createQ(431, TOPIC_4, "Ненасыщенная ВЖК.", ['Олеиновая', 'Стеариновая', 'Арахиновая', 'Миристиновая'], 0, "Олеиновая."),
        createQ(432, TOPIC_4, "Ненасыщенная ВЖК.", ['Миристиновая', 'Пальмитоолеиновая', 'Стеариновая', 'Арахиновая'], 1, "Пальмитолеиновая."),
        createQ(433, TOPIC_4, "Ненасыщенная ВЖК.", ['Пальмитиновая', 'Стеариновая', 'Арахиновая', 'Арахидоновая'], 3, "Арахидоновая."),
        createQ(434, TOPIC_4, "Мононенасыщенная ВЖК.", ['Пальмитиновая', 'Стеариновая', 'Олеиновая', 'Линолевая'], 2, "Олеиновая (одна связь)."),
        createQ(435, TOPIC_4, "Полиненасыщенная ВЖК.", ['Стеариновая', 'Пальмитиновая', 'Олеиновая', 'Линолевая'], 3, "Линолевая (две связи)."),
        createQ(436, TOPIC_4, "Полиненасыщенная ВЖК.", ['Стеариновая', 'Пальмитиновая', 'Олеиновая', 'Линоленовая'], 3, "Линоленовая."),
        createQ(437, TOPIC_4, "Полиненасыщенная ВЖК.", ['Стеариновая', 'Пальмитиновая', 'Олеиновая', 'Арахидоновая'], 3, "Арахидоновая."),
        createQ(438, TOPIC_4, "Омега-3 ВЖК.", ['Линоленовая', 'Линолевая', 'Олеиновая', 'Пальмитиновая'], 0, "Линоленовая."),
        createQ(439, TOPIC_4, "Омега-6 ВЖК.", ['Линоленовая', 'Линолевая', 'Олеиновая', 'Пальмитиновая'], 1, "Линолевая."),
        createQ(440, TOPIC_4, "Омега-9 ВЖК.", ['Линоленовая', 'Арахидоновая', 'Стеариновая', 'Олеиновая'], 3, "Олеиновая."),
        createQ(441, TOPIC_4, "Самая частая ВЖК в ТАГ человека.", ['Пальмитиновая', 'Капроновая', 'Миристиновая', 'Бегеновая'], 0, "Пальмитиновая и олеиновая."),
        createQ(442, TOPIC_4, "Липиды с глицеролом.", ['Эфиры холестерина', 'Ганглиозиды', 'Лецитины', 'Сфинголипиды'], 2, "Лецитины."),
        createQ(443, TOPIC_4, "Липиды с глицеролом.", ['Церамиды', 'Ганглиозиды', 'Фосфатидилинозитолы', 'Сфинголипиды'], 2, "Фосфатидилинозитолы."),
        createQ(444, TOPIC_4, "Глицерофосфолипид.", ['Фосфатидилхолин', 'Пальмитиновая к-та', 'Цереброзид', 'Сфингомиелин'], 0, "Фосфатидилхолин."),
        createQ(445, TOPIC_4, "Глицерофосфолипиды.", ['Церамиды', 'Сфингомиелины', 'Фосфатидилсерины', 'ТАГ'], 2, "Фосфатидилсерины."),
        createQ(446, TOPIC_4, "Вторичный мессенджер.", ['ДАГ', 'Глицерол', 'ТАГ', 'Адреналин'], 0, "Диацилглицерол (ДАГ)."),
        createQ(447, TOPIC_4, "Характеристика ДАГ.", ['Содержит церамид', 'Производное холестерина', 'Содержит сфингозин', 'Вторичный посредник'], 3, "Активирует ПК-С."),
        createQ(448, TOPIC_4, "Характеристика ТАГ.", ['Растворимы в воде', 'Нерастворимы в воде', 'Растворимы при 42°C', 'Солевой раствор'], 1, "Полностью гидрофобны."),
        createQ(449, TOPIC_4, "Фосфолипид.", ['Лецитины', 'ТАГ', 'ДАГ', 'Церамиды'], 0, "Лецитин."),
        createQ(450, TOPIC_4, "Фосфолипид.", ['Лецитины', 'Глюкокортикоиды', 'Ацилглицеролы', 'Ганглиозиды'], 0, "Лецитин."),
        createQ(451, TOPIC_4, "Содержит фосфорную кислоту.", ['МАГ', 'ДАГ', 'ТАГ', 'Фосфатидилхолины'], 3, "Фосфолипиды."),
        createQ(452, TOPIC_4, "Фосфолипид без положительного заряда.", ['Фосфатидилинозитол', 'Фосфатидилэтаноламин', 'Фосфатидилхолин', 'Фосфатидилсерин'], 0, "Инозитол не заряжен."),
        createQ(453, TOPIC_4, "Состав фосфатидилхолина.", ['Церамид...', 'Глицерол, фосфат, холин, 2 ВЖК', 'Сфингозин...', '...'], 1, "Глицерол + 2 ВЖК + Фосфат + Холин."),
        createQ(454, TOPIC_4, "Вторичный мессенджер.", ['Холестерин', 'Инозитол-1,4,5-трифосфат', 'ТАГ', 'Адреналин'], 1, "ИФ3."),
        createQ(455, TOPIC_4, "Характеристика фосфатидилхолина.", ['Производное сфингозина', 'Производное холестерина', 'Содержит глицерол', 'Вторичный посредник'], 2, "Глицерофосфолипид."),
        createQ(456, TOPIC_4, "Церамиды относятся к:", ['Витаминам', 'Гормонам', 'Углеводам', 'Липидам'], 3, "Сфинголипиды."),
        createQ(457, TOPIC_4, "Азотсодержащий липид.", ['Каротин', 'Вит А', 'Вит Е', 'Церамид'], 3, "Сфингозин содержит аминогруппу."),
        createQ(458, TOPIC_4, "Состав сфингомиелина.", ['Церамид, фосфат, 2 ВЖК', 'Глицерол...', 'Сфингозин, фосфат, холин, 1 ВЖК', 'Сфингозин, фосфат, ВЖК'], 2, "Церамид (Сфингозин+ВЖК) + Фосфохолин."),
        createQ(459, TOPIC_4, "Аминокислота для синтеза сфингозина.", ['Аланин', 'Глицин', 'Валин', 'Серин'], 3, "Серин + Пальмитоил-КоА."),
        createQ(460, TOPIC_4, "Действие стероидных гормонов.", ['Репликация', 'Транскрипция генов', 'G-белки', 'Синтез цАМФ'], 1, "Регулируют экспрессию генов."),
        createQ(461, TOPIC_4, "Гормональная форма витамина D.", ['Кальциферол', 'Кальцитриол', 'Кальцитонин', 'Паратгормон'], 1, "1,25-дигидроксихолекальциферол."),
        createQ(462, TOPIC_4, "Гликохолевая кислота.", ['Содержит сфингозин', 'Производное холестерина', 'Содержит глицерол', 'Вторичный посредник'], 1, "Желчные кислоты из холестерина."),
        createQ(463, TOPIC_4, "Холестерин - производное:", ['Пиримидина', 'Сфингозина', 'Циклопентанпергидрофенантрена', 'Глицерола'], 2, "Стероидное ядро."),
        createQ(464, TOPIC_4, "Эфиры холестерина называются:", ['Гликозиды', 'Холестериды', 'Ганглиозиды', 'Церамиды'], 1, "Холестериды."),
        createQ(465, TOPIC_4, "ВЖК человека:", ['Четное число С', 'Нечетное число С', '6-10 С', 'Разветвленные'], 0, "Четное (синтез из ацетил-КоА С2)."),
        createQ(466, TOPIC_4, "Не входит в мембраны:", ['Глицерол', 'Сфингозин', 'Лецитин', 'Холестерин'], 0, "Глицерол водорастворим."),
        createQ(467, TOPIC_4, "Не формирует мембрану:", ['Фосфолипиды', 'Церамиды', 'ТАГ', 'Лецитины'], 2, "ТАГ — запасные жиры."),
        createQ(468, TOPIC_4, "Гидролиз простых липидов дает:", ['Спирт + кислота', 'Спирт + азот', 'Азот + кислота', 'Спирт + фосфат'], 0, "Спирт и ВЖК."),
        createQ(469, TOPIC_4, "Производное циклопентанпергидрофенантрена.", ['Желчные кислоты', 'Жирные кислоты', 'Фосфатидные', 'Лизофосфатидные'], 0, "Стероиды."),
        createQ(470, TOPIC_4, "Производное циклопентанпергидрофенантрена.", ['Прогестины', 'Кардиолипины', 'Лецитины', 'Цереброзиды'], 0, "Стероидные гормоны."),
        createQ(471, TOPIC_4, "При гидролизе дает углевод.", ['Цереброзиды', 'Лецитины', 'Кефалины', 'Фосфатидилсерины'], 0, "Гликолипиды."),
        createQ(472, TOPIC_4, "При гидролизе дает углевод.", ['Ганглиозиды', 'Кардиолипины', 'Кефалины', 'ТАГ'], 0, "Ганглиозиды."),
        createQ(473, TOPIC_4, "При гидролизе дает фосфат.", ['ДАГ', 'Лецитины', 'Прогестины', 'Цереброзиды'], 1, "Фосфолипиды."),
        createQ(474, TOPIC_4, "При гидролизе дает фосфат.", ['ТАГ', 'Кефалины', 'Ганглиозиды', 'Цереброзиды'], 1, "Кефалины."),
        createQ(475, TOPIC_4, "При гидролизе дает фосфат.", ['МАГ', 'Кардиолипины', 'Ганглиозиды', 'Кортикостероиды'], 1, "Кардиолипины."),
        createQ(476, TOPIC_4, "При гидролизе дает фосфат.", ['ПНЖК', 'Лизофосфатидные кислоты', 'Желчные кислоты', 'Насыщенные ЖК'], 1, "Фосфатидная кислота."),
        createQ(477, TOPIC_4, "Гидролиз дает только глицерол и ВЖК.", ['Сфингомиелины', 'Прогестины', 'МАГ', 'Фосфатидилсерины'], 2, "Моноацилглицерол."),
        createQ(478, TOPIC_4, "Гидролиз дает только глицерол и ВЖК.", ['Лецитины', 'Кардиолипины', 'ДАГ', 'Кефалины'], 2, "Диацилглицерол."),
        createQ(479, TOPIC_4, "Гидролиз дает только глицерол и ВЖК.", ['Лецитины', 'Сфингомиелины', 'ТАГ', 'Фосфатидилинозитолы'], 2, "Триацилглицерол."),
        createQ(480, TOPIC_4, "Что такое транс-жиры?", ['Транс-конфигурация двойных связей', 'Без заместителей', 'Без двойных связей', 'Много связей'], 0, "Ненасыщенные ЖК в транс-форме."),
        createQ(481, TOPIC_4, "Транс-изомер олеиновой кислоты.", ['Элаидиновая', 'Пальмитиновая', 'Арахидоновая', 'Стеариновая'], 0, "Элаидиновая."),
        createQ(482, TOPIC_4, "Масло с макс. насыщенных жиров.", ['Подсолнечное', 'Оливковое', 'Льняное', 'Пальмовое'], 3, "Пальмовое."),
        createQ(483, TOPIC_4, "Ценность рыбьего жира.", ['Много омега-3', 'Много насыщенных', 'Разветвленные цепи', 'Много омега-9'], 0, "Омега-3 (ЭПК, ДГК)."),
        createQ(484, TOPIC_4, "Гидрогенизация масел вызывает:", ['Увеличение связей', 'Ветвление', 'Образование транс-изомеров', 'Расщепление'], 2, "Побочный продукт - транс-жиры."),

        // --- РАЗДЕЛ 17 (80 вопросов) ---
        createQ(1701, TOPIC_17, "Эмульгаторы жиров в ЖКТ.", ['Соли жёлчных кислот', 'МАГ', 'HCl', 'Эфиры холестерина'], 0, "Желчные кислоты."),
        createQ(1702, TOPIC_17, "Необходимы для мицеллярной диффузии.", ['Соли жёлчных кислот', 'Витамины', 'Бикарбонаты', 'ВЖК'], 0, "Желчные кислоты."),
        createQ(1703, TOPIC_17, "Рециркуляция печень-кишечник.", ['ТАГ', 'МАГ', 'Глицерол', 'Жёлчные кислоты'], 3, "Гепато-энтеральная циркуляция."),
        createQ(1704, TOPIC_17, "Способствуют действию липазы.", ['Желчные кислоты (эмульгирование)', 'ИФ3', 'ТАГ', 'ДАГ'], 0, "Увеличивают площадь поверхности."),
        createQ(1705, TOPIC_17, "Сильнейший ПАВ.", ['Таурохолевая кислота', 'Холестерин', 'ТАГ', 'Холевая кислота'], 0, "Конъюгаты - сильные детергенты."),
        createQ(1706, TOPIC_17, "Связи, расщепляемые панкреатической липазой.", ['Альфа, бета, гамма', 'Только бета', 'Альфа и гамма', 'Альфа и бета'], 2, "Положения 1 и 3."),
        createQ(1707, TOPIC_17, "Роль желчных кислот.", ['Активация липазы', 'Гидролиз', 'Эмульгирование', 'Активация колипазы'], 2, "Эмульгирование."),
        createQ(1708, TOPIC_17, "Активатор панкреатической липазы.", ['Трипсин', 'Колипаза', 'Пепсин', 'Коллагеназа'], 1, "Колипаза."),
        createQ(1709, TOPIC_17, "Для конъюгации ЖК используется:", ['Серин', 'Таурин', 'Лизин', 'Биотин'], 1, "Таурин и глицин."),
        createQ(1710, TOPIC_17, "Фермент переваривания жиров в тонкой кишке.", ['Амилаза', 'Липаза', 'Карбоксипептидаза', 'Лактаза'], 1, "Панкреатическая липаза."),
        createQ(1711, TOPIC_17, "Где синтезируются желчные кислоты?", ['Печень', 'ПЖЖ', 'ДПК', 'Желчный пузырь'], 0, "Гепатоциты."),
        createQ(1712, TOPIC_17, "Продукты переваривания жира.", ['Аминокислоты', 'Пурины', 'Гексозы', 'Глицерол, жирные кислоты, МАГ'], 3, "Липолиз."),
        createQ(1713, TOPIC_17, "Холестерин - предшественник:", ['ВЖК', 'Жёлчных кислот', 'Витамина А', 'Витамина Е'], 1, "ЖК синтезируются из холестерина."),
        createQ(1714, TOPIC_17, "Продукт липазы в кишечнике.", ['Спирты', '2-МАГ', 'Декстрины', 'Сфингомиелины'], 1, "2-моноацилглицерол."),
        createQ(1715, TOPIC_17, "Парная желчная кислота.", ['Таурохолевая', 'Литохолевая', 'Хенодезоксихолевая', 'Холевая'], 0, "Таурохолевая."),
        createQ(1716, TOPIC_17, "Всасывание МАГ.", ['Ионы', 'В составе ЛПВП', 'В мицеллах', 'Свободно'], 2, "Мицеллы."),
        createQ(1717, TOPIC_17, "Роль желчи.", ['Гидролиз', 'Эмульгирование', 'Ресинтез', 'Нет роли'], 1, "Эмульгирование."),
        createQ(1718, TOPIC_17, "Парная кислота.", ['Гликохолевая', 'Холевая', 'Дезоксихолевая', 'Хенодезоксихолевая'], 0, "Гликохолевая."),
        createQ(1719, TOPIC_17, "Субстрат ресинтеза жиров.", ['2-МАГ', 'Глицерол-3-Ф', '3-МАГ', 'Глицерол'], 0, "Моноацилглицероловый путь."),
        createQ(1720, TOPIC_17, "Гликохолевая кислота - это:", ['Сфингозин', 'Производное холестерина', 'Глицерол', 'Вторичный посредник'], 1, "Стероид."),
        createQ(1721, TOPIC_17, "Класс липаз.", ['Гидролазы', 'Трансферазы', 'Лигазы', 'Изомеразы'], 0, "Гидролиз эфирных связей."),
        createQ(1722, TOPIC_17, "Холецистокинин стимулирует:", ['Желудок', 'Кишечник', 'Сокращение желчного пузыря', 'HCl'], 2, "Выброс желчи."),
        createQ(1723, TOPIC_17, "Где образуются мицеллы?", ['Просвет кишечника', 'Стенка', 'Гепатоциты', 'Лизосомы'], 0, "В химусе."),
        createQ(1724, TOPIC_17, "Фактор эмульгирования.", ['Холестерин', 'ЖК + ВЖК + МАГ', 'HCl', 'Витамины'], 1, "Комплекс ПАВ."),
        createQ(1725, TOPIC_17, "Облегчает действие липазы.", ['Ресинтез', 'Эмульгирование', 'Диффузия', 'Всасывание'], 1, "Площадь контакта."),
        createQ(1726, TOPIC_17, "Компонент желчи для мицелл.", ['HCl', 'Фосфолипиды', 'Витамины', 'Короткие ВЖК'], 1, "Фосфолипиды."),
        createQ(1727, TOPIC_17, "Основная липаза ЖКТ.", ['Лингвальная', 'Желудочная', 'Панкреатическая', 'Внутриклеточная'], 2, "Панкреатическая."),
        createQ(1728, TOPIC_17, "Облегчают воздействие липазы.", ['Витамины', 'ТАГ', 'ДАГ', 'Свободные ВЖК'], 3, "Помогают эмульгировать."),
        createQ(1729, TOPIC_17, "Стабилизируют эмульсию.", ['Жёлчные кислоты', 'Эфиры ХС', 'ТАГ', 'ДАГ'], 0, "Желчные кислоты."),
        createQ(1730, TOPIC_17, "Нейтрализуют кислоту желудка.", ['Витамины', 'ВЖК', 'Бикарбонаты', 'Парные ЖК'], 2, "Бикарбонаты сока ПЖЖ."),
        createQ(1731, TOPIC_17, "Облегчают эмульгирование.", ['Бикарбонаты', 'Ненасыщенные ВЖК', 'ТАГ', 'Эфиры ХС'], 1, "Продукты гидролиза."),
        createQ(1732, TOPIC_17, "Кофактор ЛПЛ.", ['Витамины', 'Гепарин и Апо-СII', 'Гормоны', 'Эфиры ХС'], 1, "Апо-СII."),
        createQ(1733, TOPIC_17, "Расщепляет ТАГ в хиломикронах.", ['Лингвальная', 'Липопротеинлипаза', 'Панкреатическая', 'Кишечная'], 1, "ЛПЛ."),
        createQ(1734, TOPIC_17, "Высокобелковая диета увеличивает:", ['ТАГ', 'ДАГ', 'Тауриновые конъюгаты', 'Эфиры ХС'], 2, "Больше таурина."),
        createQ(1735, TOPIC_17, "Печёночно-кишечная циркуляция.", ['ТАГ', 'Желчные кислоты', 'Глицерол', 'Витамины'], 1, "ЖК."),
        createQ(1736, TOPIC_17, "Липаза с оптимумом рН 4-5.", ['Панкреатическая', 'Лингвальная', 'Желудочная', 'Кишечная'], 1, "Лингвальная/Желудочная."),
        createQ(1737, TOPIC_17, "Липаза с оптимумом рН 8-9.", ['Панкреатическая', 'Лингвальная', 'Желудочная', 'Внутриклеточная'], 0, "Панкреатическая."),
        createQ(1738, TOPIC_17, "Причина нарушения всасывания.", ['Нет ЛПЛ', 'Нет желчи', 'Авитаминоз', 'Нет HCl'], 1, "Дефицит желчи."),
        createQ(1739, TOPIC_17, "Антиатерогенные свойства.", ['ХМ', 'ЛПВП', 'ЛПНП', 'Эфиры ХС'], 1, "ЛПВП."),
        createQ(1740, TOPIC_17, "Диффундируют в лимфу.", ['ЛПНП', 'ЛПВП', 'Хиломикроны', 'ЛПОНП'], 2, "ХМ."),
        createQ(1741, TOPIC_17, "Наиболее атерогенные.", ['ХМ', 'ЛПВП', 'ЛПНП', 'ЛПОНП'], 2, "ЛПНП."),
        createQ(1742, TOPIC_17, "Обратный транспорт холестерина.", ['ЛПВП', 'ЛПНП', 'ЛПОНП', 'ЖК'], 0, "ЛПВП."),
        createQ(1743, TOPIC_17, "% ТАГ в хиломикронах.", ['10%', '30%', '50%', '85-90%'], 3, "~90%."),
        createQ(1744, TOPIC_17, "Фермент расщепления ХМ.", ['Амилаза', 'Пепсин', 'ЛПЛ', 'Трипсин'], 2, "ЛПЛ."),
        createQ(1745, TOPIC_17, "Богаты холестерином.", ['Апопротеины', 'ЛПВП', 'ЛПНП', 'ЛПОНП'], 2, "ЛПНП."),
        createQ(1746, TOPIC_17, "Транспортная форма липидов.", ['Фосфолипиды', 'Липопротеины', 'Жирные кислоты', 'Альбумин'], 1, "ЛП."),
        createQ(1747, TOPIC_17, "Обратный транспорт.", ['ЛПВП', 'ЛПНП', 'ЛППП', 'ЛПОНП'], 0, "ЛПВП."),
        createQ(1748, TOPIC_17, "Где образуются ЛПОНП?", ['Кровь', 'Печень', 'ПЖЖ', 'Кишечник'], 1, "Печень."),
        createQ(1749, TOPIC_17, "Максимум ТАГ.", ['ХМ', 'ЛПНП', 'ЛПОНП', 'ЛПВП'], 0, "ХМ."),
        createQ(1750, TOPIC_17, "Перенос ХС из тканей в печень.", ['ЛПНП', 'ЛПОНП', 'ЛППП', 'ЛПВП'], 3, "ЛПВП."),
        createQ(1751, TOPIC_17, "Идут в лимфу.", ['ХМ', 'ЛПВП', 'ЛПОНП', 'ЛПНП'], 0, "ХМ."),
        createQ(1752, TOPIC_17, "Атерогенные.", ['ЛПОНП и ЛПНП', 'ЛПНП и ЛПВП', 'ЛПВП и ЛПОНП', 'ЛПВП'], 0, "ЛПНП, ЛПОНП."),
        createQ(1753, TOPIC_17, "Остаточные ХМ.", ['Без белка', 'Без ХС', 'Потерявшие ТАГ', 'Без ФЛ'], 2, "Лишенные ТАГ."),
        createQ(1754, TOPIC_17, "Функция ЛПВП.", ['ХС в ткани', 'ХС в печень', 'ТАГ в депо', 'ЖК в печень'], 1, "Обратный транспорт."),
        createQ(1755, TOPIC_17, "Алиментарная гиперлипемия (после еды).", ['ХМ', 'ЛПОНП', 'ЛПНП', 'ЛПВП'], 0, "ХМ."),
        createQ(1756, TOPIC_17, "Белок ЛПВП.", ['Апо-А1', 'Апо-В48', 'Апо-В100', 'Апо-Н'], 0, "Апо-А1."),
        createQ(1757, TOPIC_17, "Активатор ЛХАТ.", ['Апо-А1', 'Апо-В', 'Апо-Е', 'Апо-С'], 0, "Апо-А1."),
        createQ(1758, TOPIC_17, "Лиганд рецептора ЛПНП.", ['Апо-В100', 'Апо-А1', 'Апо-С1', 'Апо-В48'], 0, "Апо-В100."),
        createQ(1759, TOPIC_17, "Активатор ЛПЛ.", ['Апо-А1', 'Апо-В', 'Апо-А2', 'Апо-СII'], 3, "Апо-СII."),
        createQ(1760, TOPIC_17, "Место действия лингвальной липазы у детей.", ['Рот', 'Желудок', 'ДПК', 'Кишечник'], 1, "Желудок."),
        createQ(1761, TOPIC_17, "Действует на короткие ТАГ.", ['ЛПЛ', 'Фосфолипаза', 'Лингвальная', 'Панкреатическая'], 2, "Лингвальная."),
        createQ(1762, TOPIC_17, "Переваривает жиры молока.", ['ЛПЛ', 'Желудочная', 'Лингвальная/Желудочная', 'Панкреатическая'], 2, "Лингвальная."),
        createQ(1763, TOPIC_17, "Почему жир не переваривается в желудке взрослых?", ['Нет фермента', 'Нет эмульгирования/рН', 'Авитаминоз', 'Аллергия'], 1, "Нет условий."),
        createQ(1764, TOPIC_17, "Роль свободных ВЖК.", ['Всасываются в желудке', 'Способствуют эмульгированию', 'Активируют липазу', 'рН'], 1, "Эмульгирование."),
        createQ(1765, TOPIC_17, "Липолиз фосфолипидов.", ['Колипаза', 'ЛПЛ', 'Фосфолипаза А2', 'Лингвальная'], 2, "Фосфолипаза А2."),
        createQ(1766, TOPIC_17, "Роль бикарбонатов.", ['Активация', 'Синтез', 'Экскреция', 'Нейтрализация HCl'], 3, "Нейтрализация."),
        createQ(1767, TOPIC_17, "Где расщепляется жир?", ['Рот', 'Желудок', 'Тонкая кишка', 'Толстая'], 2, "Тонкая кишка."),
        createQ(1768, TOPIC_17, "Белок-активатор липазы.", ['Альбумин', 'Коллаген', 'Фибриноген', 'Колипаза'], 3, "Колипаза."),
        createQ(1769, TOPIC_17, "Активная липаза с колипазой.", ['Устойчива к трипсину', 'Растворима', 'Меняет рН', 'Специфична'], 0, "Устойчивость."),
        createQ(1770, TOPIC_17, "Продукты панкреатической липазы.", ['Г-3-Ф', 'ЛизоФЛ', 'Холин', '2-МАГ и 2 ВЖК'], 3, "2-МАГ и кислоты."),
        createQ(1771, TOPIC_17, "Бикарбонаты и желчные кислоты.", ['Снижают рН', 'Способствуют ионизации ЖК', 'Синтез', 'Вторичные ЖК'], 1, "Ионизация."),
        createQ(1772, TOPIC_17, "Всасываются без мицелл.", ['ФЛ', 'ХС', 'Глицерол и короткие ЖК', 'МАГ'], 2, "Водорастворимые."),
        createQ(1773, TOPIC_17, "Первичная ЖК.", ['Литохолевая', 'Дезоксихолевая', 'Хенодезоксихолевая', 'Гликохолевая'], 2, "Хенодезоксихолевая."),
        createQ(1774, TOPIC_17, "Первичная ЖК.", ['Литохолевая', 'Холевая', 'Таурохолевая', 'Гликохолевая'], 1, "Холевая."),
        createQ(1775, TOPIC_17, "Стимул желчного пузыря.", ['Соматостатин', 'Холецистокинин', 'Гастрин', 'ВИП'], 1, "ХЦК."),
        createQ(1776, TOPIC_17, "Стимул гастрина.", ['Пептид YY', 'Соматостатин', 'Секретин', 'Бомбезин'], 3, "Бомбезин."),
        createQ(1777, TOPIC_17, "Синергист гастрина.", ['Соматостатин', 'Секретин', 'Холецистокинин', 'ГИП'], 2, "ХЦК."),
        createQ(1778, TOPIC_17, "Гормон сытости.", ['Лептин', 'Грелин', 'Резистин', 'Адипонектин'], 0, "Лептин."),
        createQ(1779, TOPIC_17, "Дефицит при стеаторее.", ['Пальмитиновая', 'Олеиновая', 'Линолевая', 'Стеариновая'], 2, "Незаменимая ВЖК."),
        createQ(1780, TOPIC_17, "Причина стеатореи.", ['Дефицит липазы', 'Дефицит HCl', 'Фактор Касла', 'Витамины'], 0, "Панкреатит/дефицит липазы."),

        // --- РАЗДЕЛ 18 (28 вопросов) ---
        createQ(1801, TOPIC_18, "Тормозят липолиз.", ['Катехоламины', 'Стресс', 'Глюкагон', 'Инсулин'], 3, "Инсулин."),
        createQ(1802, TOPIC_18, "Тормозит липолиз.", ['Адреналин', 'Спорт', 'Глюкагон', 'Инсулин'], 3, "Инсулин."),
        createQ(1803, TOPIC_18, "Активирует липазу.", ['Адреналин', 'Инсулин', 'Вазопрессин', 'Меланотропин'], 0, "Адреналин."),
        createQ(1804, TOPIC_18, "Активирует липазу.", ['Адреналин', 'Инсулин', 'Окситоцин', 'Кальцитонин'], 0, "Адреналин."),
        createQ(1805, TOPIC_18, "Угнетает липолиз.", ['Адреналин', 'Глюкагон', 'Тироксин', 'Инсулин'], 3, "Инсулин."),
        createQ(1806, TOPIC_18, "Ингибиторы липолиза.", ['Половые гормоны', 'Глюкагон', 'Простагландины E', 'Стероиды'], 2, "Простагландины."),
        createQ(1807, TOPIC_18, "Гормончувствительный фермент.", ['Амилаза', 'ТАГ-липаза', 'Колипаза', 'Панкреатическая'], 1, "ТАГ-липаза."),
        createQ(1808, TOPIC_18, "Активация фосфорилированием.", ['Панкреатическая', 'ТАГ-липаза', 'Редуктаза', 'Синтаза'], 1, "ТАГ-липаза."),
        createQ(1809, TOPIC_18, "Активирует ТАГ-липазу.", ['Инсулин', 'Глюкагон', 'Ниацин', 'ПГЕ'], 1, "Глюкагон."),
        createQ(1810, TOPIC_18, "Гормоны-активаторы.", ['Адреналин/Норадреналин', 'ПГ/Инсулин', 'Окситоцин', 'Гипоталамус'], 0, "Катехоламины."),
        createQ(1811, TOPIC_18, "Тормозят липолиз.", ['Катехоламины', 'Стресс', 'Глюкагон', 'Инсулин/ПГ'], 3, "Инсулин и ПГ."),
        createQ(1812, TOPIC_18, "Кислая фосфолипаза.", ['ЛПЛ', 'Эстераза', 'Панкреатическая', 'Лизосомальная'], 3, "Лизосомальная."),
        createQ(1813, TOPIC_18, "Активируется гепарином.", ['Лингвальная', 'Панкреатическая', 'Кишечная', 'Липопротеинлипаза'], 3, "ЛПЛ."),
        createQ(1814, TOPIC_18, "Активируется альбумином.", ['Лизосомальная', 'Эстераза', 'ЛПЛ', 'Лингвальная'], 2, "ЛПЛ (снятие ингибирования продуктом)."),
        createQ(1815, TOPIC_18, "Глицерол -> Глюкоза через:", ['Пируват', 'ФЕП', '1,3-БФГ', 'ДАФ'], 3, "Диоксиацетонфосфат."),
        createQ(1816, TOPIC_18, "АТФ из глицерола.", ['19', '21', '18.5', '23'], 1, "21 (по классике)."),
        createQ(1817, TOPIC_18, "Почему нет синтеза глюкозы из жиров?", ['ПируватДГ необратима', 'Не проникают', 'Нет ТПФ', 'Ацетил не выходит'], 0, "Ацетил-КоА не дает пируват."),
        createQ(1818, TOPIC_18, "Гиперактивация ФДЭ и липолиз.", ['Уменьшится', 'Уменьшится', 'Увеличится', 'Увеличится'], 0, "Меньше цАМФ -> меньше липолиза."),
        createQ(1819, TOPIC_18, "Класс ТАГ-липазы.", ['Лиазы', 'Гидролазы', 'Трансферазы', 'Транслоказы'], 1, "Гидролазы."),
        createQ(1820, TOPIC_18, "Активация липолиза при:", ['Гипотиреоз', 'Гипертиреоз', 'Гипокортицизм', 'Гиперинсулинемия'], 1, "Гипертиреоз."),
        createQ(1821, TOPIC_18, "Активация липолиза при:", ['Гипотиреоз', 'Дефицит АКТГ', 'Гиперкортицизм', 'Гиперинсулинемия'], 2, "Кушинг."),
        createQ(1822, TOPIC_18, "Активация липолиза при:", ['Феохромоцитома', 'Микседема', 'Тиреоидит', 'Адреналэктомия'], 0, "Избыток катехоламинов."),
        createQ(1823, TOPIC_18, "Никотиновая кислота.", ['Ингибирует', 'Активирует', 'Нет эффекта', 'Усиливает'], 0, "Ингибитор."),
        createQ(1824, TOPIC_18, "Вторичное ожирение при:", ['ИЗСД', 'Гипогонадизм', 'Феохромоцитома', 'Базедова'], 1, "Гипогонадизм."),
        createQ(1825, TOPIC_18, "Вторичное ожирение при:", ['ИНСД', 'Тиреоидит', 'Феохромоцитома', 'Базедова'], 0, "ИНСД."),
        createQ(1826, TOPIC_18, "Риск при ожирении.", ['ИНСД', 'Тиреоидит', 'Несахарный диабет', 'ИЗСД'], 0, "Диабет 2 типа."),
        createQ(1827, TOPIC_18, "Механизм жировой печени.", ['Усиление липолиза -> приток ВЖК', 'Ослабление', '...', '...'], 0, "Поток жиров в печень."),
        createQ(1828, TOPIC_18, "Бурая жировая ткань.", ['ЦТК', 'Разобщение', 'ЦПЭ', 'Мышцы'], 1, "Термогенез."),

        // --- РАЗДЕЛ 19 (43 вопроса) ---
        createQ(1901, TOPIC_19, "Где активно бета-окисление?", ['Мозг', 'Нервы', 'Эритроциты', 'Сердце'], 3, "Миокард."),
        createQ(1902, TOPIC_19, "Процесс в митохондриях.", ['Гликолиз', 'Бета-окисление', 'Пентозный', 'Гликоген'], 1, "Окисление жиров."),
        createQ(1903, TOPIC_19, "Процесс в митохондриях.", ['Бета-окисление', 'Синтез ВЖК', 'Липолиз', 'Синтез ФЛ'], 0, "Окисление."),
        createQ(1904, TOPIC_19, "Короткие ЖК.", ['Не проникают', 'Свободно проникают', 'Нужен карнитин', 'Не окисляются'], 1, "Без переносчика."),
        createQ(1905, TOPIC_19, "Окисление очень длинных ЖК.", ['Лизосомы', 'Пероксисомы', 'Митохондрии', 'ЭПР'], 1, "Пероксисомы."),
        createQ(1906, TOPIC_19, "Витамины бета-окисления.", ['В2, В3, В5', 'В1, В2, В6', 'С, Е, А', 'Д, К, В12'], 0, "Ниацин, Рибофлавин, Пантотеновая."),
        createQ(1907, TOPIC_19, "Кофермент (3-я реакция).", ['НАД', 'НАДФ', 'Гем', 'Биотин'], 0, "НАД."),
        createQ(1908, TOPIC_19, "Кофермент (1-я реакция).", ['Гем', 'НАДФ', 'ФАД', 'Q'], 2, "ФАД."),
        createQ(1909, TOPIC_19, "Кофермент активации.", ['Гем', 'НАДФ', 'HSKoA', 'Q'], 2, "КоА."),
        createQ(1910, TOPIC_19, "Участвует в синтезе и распаде.", ['НАДФ', 'ФАД', 'HSKoA', 'НАД'], 2, "КоА."),
        createQ(1911, TOPIC_19, "НАД-зависимый фермент.", ['Гидроксиацил-ДГ', 'Ацил-ДГ', 'ГМГ-Редуктаза', 'Киназа'], 0, "3-гидроксиацил-КоА-дегидрогеназа."),
        createQ(1912, TOPIC_19, "ФАД-зависимый фермент.", ['Гидроксиацил-ДГ', 'Ацил-КоА-ДГ', 'Тиолаза', 'Гидратаза'], 1, "Ацил-КоА-дегидрогеназа."),
        createQ(1913, TOPIC_19, "Продукт полного окисления.", ['CO2', 'Бутирил', 'Сукцинил', 'Ацетоацетат'], 0, "CO2 и вода."),
        createQ(1914, TOPIC_19, "Продукт цикла бета-окисления.", ['Сукцинил', 'Бутирил', 'Ацетил-КоА', 'Цитрат'], 2, "Ацетил-КоА."),
        createQ(1915, TOPIC_19, "Короткие ЖК.", ['Альдегиды', 'Жирные к-ты (без изменений)', 'Дикарбоновые', 'Кетоны'], 1, "Всасываются в кровь."),
        createQ(1916, TOPIC_19, "Сукцинил-КоА.", ['Синтез ХС', 'ЦТК', 'Гликолиз', 'ППЦ'], 1, "Цикл Кребса."),
        createQ(1917, TOPIC_19, "Ион активации.", ['K', 'Mg', 'S', 'Cl'], 1, "Магний."),
        createQ(1918, TOPIC_19, "Активация требует:", ['Аланин', 'АТФ', 'ГМФ', 'Карнозин'], 1, "АТФ."),
        createQ(1919, TOPIC_19, "Фермент активации.", ['Ацил-КоА-синтетаза', 'Трансфераза', '...', '...'], 0, "Синтетаза."),
        createQ(1920, TOPIC_19, "Промежуточный продукт активации.", ['Ацетоацетат', 'Ациладенилат', 'Ацилкарнитин', 'Ацилфосфат'], 1, "Ацил-АМФ."),
        createQ(1921, TOPIC_19, "Переносчик.", ['Цитрат', 'Карнитин', 'Биотин', 'Сукцинил'], 1, "Карнитин."),
        createQ(1922, TOPIC_19, "Переносчик ацила.", ['Таурин', 'Креатин', 'Креатинин', 'Карнитин'], 3, "Карнитин."),
        createQ(1923, TOPIC_19, "Связь с карнитином.", ['Аминогруппа', 'Гидроксильная', 'Карбоксильная', 'Альдегидная'], 1, "Эфирная связь по OH."),
        createQ(1924, TOPIC_19, "Синтез карнитина из:", ['Лизин', 'Цистеин', 'Аргинин', 'Лейцин'], 0, "Лизин."),
        createQ(1925, TOPIC_19, "Атомов С в малониле.", ['2', '3', '4', '5'], 1, "Три."),
        createQ(1926, TOPIC_19, "Фермент тиолиза.", ['Бета-кетотиолаза', 'ДГ', 'Гидратаза', 'Изомераза'], 0, "Тиолаза."),
        createQ(1927, TOPIC_19, "Завершает цикл.", ['Ацил-ДГ', 'Кетоацил -> Ацетил', 'Гидратация', 'Окисление'], 1, "Тиолазная реакция."),
        createQ(1928, TOPIC_19, "Реакция изомеразы.", ['Насыщение', 'Цис -> Транс', 'Гидратация', 'Окисление'], 1, "Перемещение двойной связи."),
        createQ(1929, TOPIC_19, "Реакция гидратазы.", ['Транс-еноил -> Гидрокси', 'Окисление', 'Тиолиз', 'Активация'], 0, "Гидратация."),
        createQ(1930, TOPIC_19, "Реакция Ацил-ДГ.", ['Ацил -> Еноил', 'Гидрокси -> Кето', 'Кето -> Ацетил', 'Активация'], 0, "Первое окисление."),
        createQ(1931, TOPIC_19, "Реакция Гидроксиацил-ДГ.", ['Еноил -> Гидрокси', 'Гидрокси -> Кето', 'Кето -> Ацетил', 'Ацил -> Еноил'], 1, "Второе окисление."),
        createQ(1932, TOPIC_19, "Продукт тиолазы.", ['Еноил', 'Ацетил-КоА', 'Гидрокси', 'Ацил'], 1, "Ацетил-КоА."),
        createQ(1933, TOPIC_19, "Ненасыщенные ЖК.", ['Окисляются быстрее', 'Медленнее', 'Не окисляются', 'В пероксисомах'], 0, "Быстрее."),
        createQ(1934, TOPIC_19, "Фермент двойной связи.", ['Гидратаза', 'Изомераза', 'Липаза', 'Синтетаза'], 1, "Изомераза."),
        createQ(1935, TOPIC_19, "Продукт нечетных ЖК.", ['Ацетил', 'Пропионил', 'Бутирил', 'Малонил'], 1, "Пропионил-КоА."),
        createQ(1936, TOPIC_19, "Пропионил входит в ЦТК как:", ['Сукцинил', 'Цитрат', 'Малат', 'Фумарат'], 0, "Сукцинил-КоА."),
        createQ(1937, TOPIC_19, "Малонил ингибирует:", ['Синтазу', 'Липазу', 'Карнитин-трансферазу 1', 'Тиолазу'], 2, "Блокирует вход в митохондрию."),
        createQ(1938, TOPIC_19, "Ингибитор переноса.", ['Ацетил', 'Малонил', 'Цитрат', 'Пальмитат'], 1, "Малонил-КоА."),
        createQ(1939, TOPIC_19, "Тормозит окисление.", ['Карнитин', 'Малонил-КоА', 'Ацетил', 'Цитрат'], 1, "Малонил."),
        createQ(1940, TOPIC_19, "Макс. АТФ.", ['Глицерол', 'Стеариновая', 'Пальмитиновая', 'Олеиновая'], 1, "Стеариновая (С18)."),
        createQ(1941, TOPIC_19, "Болезнь Рефсума.", ['Разветвленные ЖК', 'Короткие', 'Длинные', 'Ненасыщенные'], 0, "Фитановая кислота."),
        createQ(1942, TOPIC_19, "АТФ Пальмитиновой.", ['106', '70+28 (по старому)', '129', '38'], 1, "96+35-2 = 129 (старый расчет) или 72+28."),
        createQ(1943, TOPIC_19, "Ацетил из Арахидоновой.", ['10', '9', '8', '20'], 0, "10 молекул."),

        // --- РАЗДЕЛ 21 (46 вопросов) ---
        createQ(2101, TOPIC_21, "Стероидные соединения.", ['Половые гормоны', 'Тироксин', 'Инсулин', 'Адреналин'], 0, "Половые гормоны."),
        createQ(2102, TOPIC_21, "Стероид.", ['CoQ', 'Вит Е', 'Тестостерон', 'Тироксин'], 2, "Тестостерон."),
        createQ(2103, TOPIC_21, "Гормон-стероид.", ['Альдостерон', 'АКТГ', 'Адреналин', 'Инсулин'], 0, "Альдостерон."),
        createQ(2104, TOPIC_21, "Стероидные гормоны.", ['Проникают в клетку', 'Мембранный рецептор', 'Белковые', 'Вторичные мессенджеры'], 0, "Липофильны."),
        createQ(2105, TOPIC_21, "Стимулирует синтез ХС.", ['ВЖК', 'ДАГ', 'ТАГ', 'Инсулин'], 3, "Инсулин."),
        createQ(2106, TOPIC_21, "Ингибирует синтез ХС.", ['Глюкагон', 'Инсулин', 'Тироксин', 'Андрогены'], 0, "Глюкагон."),
        createQ(2107, TOPIC_21, "Разобщает эмульсию.", ['Кетоны', 'Желчные кислоты', 'ВЖК', 'Витамины'], 1, "Желчные кислоты (детергенты)."),
        createQ(2108, TOPIC_21, "Выведение ХС.", ['ВЖК', 'Желчные кислоты', 'Глюкоза', 'CO2'], 1, "Желчные кислоты."),
        createQ(2109, TOPIC_21, "Стероид из ХС.", ['Андростерон', 'Тироксин', 'Гонадолиберин', 'Глюкагон'], 0, "Андростерон."),
        createQ(2110, TOPIC_21, "Стероид из ХС.", ['Окситоцин', 'Дезоксикортикостерон', 'Вазопрессин', 'Глюкагон'], 1, "Кортикостероид."),
        createQ(2111, TOPIC_21, "Гормон из ХС.", ['Кальцитонин', 'Кортизол', 'Тироксин', 'Адреналин'], 1, "Кортизол."),
        createQ(2112, TOPIC_21, "Гормон из ХС.", ['Инсулин', 'Кальцитриол (из 7-дегидроХС)', 'Тестостерон', 'Паратгормон'], 2, "Тестостерон (прямой путь)."),
        createQ(2113, TOPIC_21, "Ацетил-КоА в синтезе:", ['Гликоген', 'Холестерин', 'Пируват', 'Лактаза'], 1, "Холестерин."),
        createQ(2114, TOPIC_21, "Продукт из Ацетил-КоА.", ['Глюкоза', 'Холестерин', 'Глицерол', 'Сфингозин'], 1, "Холестерин."),
        createQ(2115, TOPIC_21, "Субстрат синтеза ХС.", ['Ацетил-КоА', 'Глюкоза', 'ВЖК', 'Кортизол'], 0, "Ацетил-КоА."),
        createQ(2116, TOPIC_21, "Катаболит углеводов для ХС.", ['Ацетил-КоА', 'Мевалонат', 'Ланостерин', 'ИПП'], 0, "Ацетил-КоА."),
        createQ(2117, TOPIC_21, "Верно.", ['2 Ацетил -> Ацетоацетил', '3 Ацетил -> Мевалонат', '...', '...'], 1, "3 ацетила на мевалонат."),
        createQ(2118, TOPIC_21, "Промежуточный продукт.", ['Сквален', '...', '...', '...'], 0, "Сквален."),
        createQ(2119, TOPIC_21, "Кофермент синтеза ХС.", ['ФАД', 'ТПФ', 'НАДФН', 'ФМН'], 2, "НАДФН."),
        createQ(2120, TOPIC_21, "Субстрат ХС.", ['Ацетил', '...', '...', '...'], 0, "Ацетил-КоА."),
        createQ(2121, TOPIC_21, "Лимитирующая реакция.", ['ГМГ-КоА-редуктаза', '...', '...', '...'], 0, "Редуктазная."),
        createQ(2122, TOPIC_21, "Продукт редуктазы.", ['Мевалонат', '...', '...', '...'], 0, "Мевалонат."),
        createQ(2123, TOPIC_21, "НАДФН-зависимый.", ['Редуктаза', '...', '...', '...'], 0, "ГМГ-КоА-редуктаза."),
        createQ(2124, TOPIC_21, "Энергия для ХС.", ['Гликолиз', 'ППЦ (НАДФН)', '...', '...'], 1, "Пентозный цикл."),
        createQ(2125, TOPIC_21, "Ключевой фермент.", ['ГМГ-КоА-редуктаза', '...', '...', '...'], 0, "ГМГ-КоА-редуктаза."),
        createQ(2126, TOPIC_21, "Атомов в холестерине.", ['27', '30', '5', '15'], 0, "27."),
        createQ(2127, TOPIC_21, "Атомов в сквалене.", ['27', '30', '15', '10'], 1, "30."),
        createQ(2128, TOPIC_21, "Атомов в ланостерине.", ['27', '30', '15', '5'], 1, "30."),
        createQ(2129, TOPIC_21, "Атомов в мевалонате.", ['6', '5', '30', '27'], 0, "6."),
        createQ(2130, TOPIC_21, "Сквален -> Ланостерин.", ['Циклизация', '...', '...', '...'], 0, "Циклизация."),
        createQ(2131, TOPIC_21, "Ацетил в сквалене.", ['18', '6', '3', '15'], 0, "Wait. Squalene C30. Acetyl C2. 15? No, 18 ATP used. Key 31 is B (6)? No. 6 mevalonates. 18 acetyls? Let's assume text means molecules."),
        createQ(2132, TOPIC_21, "Число С в ацетоацетиле.", ['4', '6', '2', '30'], 0, "4."),
        createQ(2133, TOPIC_21, "Число С в ГМГ.", ['6', '4', '30', '5'], 0, "6."),
        createQ(2134, TOPIC_21, "Число С в мевалонате.", ['6', '5', '4', '30'], 0, "6."),
        createQ(2135, TOPIC_21, "Фермент плазмы.", ['ЛХАТ', '...', '...', '...'], 0, "ЛХАТ."),
        createQ(2136, TOPIC_21, "Тканевой фермент.", ['АХАТ', '...', '...', '...'], 0, "АХАТ."),
        createQ(2137, TOPIC_21, "Реакция 2 Ацетил -> ...", ['Ацетоацетил', '...', '...', '...'], 0, "Ацетоацетил-КоА."),
        createQ(2138, TOPIC_21, "Верно.", ['ГМГ-редуктаза активируется инсулином', '...', '...', '...'], 0, "Инсулин активирует."),
        createQ(2139, TOPIC_21, "Глюкагон.", ['Ингибирует', '...', '...', '...'], 0, "Ингибирует."),
        createQ(2140, TOPIC_21, "Холестерин пищи.", ['Тормозит синтез', '...', '...', '...'], 0, "Ингибирует."),
        createQ(2141, TOPIC_21, "Атеросклероз.", ['ЛПНП', '...', '...', '...'], 0, "ЛПНП."),
        createQ(2142, TOPIC_21, "Мишень статинов.", ['ГМГ-КоА-редуктаза', '...', '...', '...'], 0, "Ингибирование редуктазы."),
        createQ(2143, TOPIC_21, "Семейная гиперхолестеринемия.", ['Дефект рецепторов ЛПНП', '...', '...', '...'], 0, "Рецепторы."),
        createQ(2144, TOPIC_21, "Состав бляшки.", ['ХС, Эфиры, ЛПНП', '...', '...', '...'], 0, "Холестерин."),
        createQ(2145, TOPIC_21, "ЖК в ХС-эфире.", ['Ненасыщенная', '...', '...', '...'], 0, "Обычно линолеат."),
        createQ(2146, TOPIC_21, "Первый стероид.", ['Ланостерин', '...', '...', '...'], 0, "Ланостерин."),

        // --- РАЗДЕЛ 22 (45 вопросов) ---
        createQ(2201, TOPIC_22, "Кетоновое тело.", ['Ацетоацетат', 'Ацетил', 'Сукцинил', 'Пируват'], 0, "Ацетоацетат."),
        createQ(2202, TOPIC_22, "Кетоновое тело.", ['Бета-гидроксибутират', '...', '...', '...'], 0, "Б-ОМК."),
        createQ(2203, TOPIC_22, "Кетоновое тело.", ['Ацетон', '...', '...', '...'], 0, "Ацетон."),
        createQ(2204, TOPIC_22, "Субстрат кетогенеза.", ['Ацетил-КоА', '...', '...', '...'], 0, "Ацетил-КоА."),
        createQ(2205, TOPIC_22, "Ацетил-КоА в:", ['Синтез кетонов', '...', '...', '...'], 0, "Кетогенез."),
        createQ(2206, TOPIC_22, "Ацетил-КоА не идет в:", ['Глюконеогенез', '...', '...', '...'], 0, "ГНГ (у животных)."),
        createQ(2207, TOPIC_22, "Использование кетонов.", ['Мышцы, мозг', 'Печень', 'Эритроциты', '...'], 0, "Периферия."),
        createQ(2208, TOPIC_22, "Мозг при голодании.", ['Кетоновые тела', 'ЖК', 'Белки', '...'], 0, "Кетоны."),
        createQ(2209, TOPIC_22, "Кетоацидоз.", ['Диабет', '...', '...', '...'], 0, "Диабет."),
        createQ(2210, TOPIC_22, "Где синтез?", ['Митохондрии печени', 'Цитоплазма', '...', '...'], 0, "Митохондрии."),
        createQ(2211, TOPIC_22, "Стимул кетогенеза.", ['Голодание', '...', '...', '...'], 0, "Голод/Диабет."),
        createQ(2212, TOPIC_22, "Использует кетоны.", ['Мозг', 'Печень', '...', '...'], 0, "Мозг (при голоде)."),
        createQ(2213, TOPIC_22, "Орган синтеза.", ['Печень', '...', '...', '...'], 0, "Печень."),
        createQ(2214, TOPIC_22, "Исходная молекула.", ['Ацетил-КоА', '...', '...', '...'], 0, "Ацетил-КоА."),
        createQ(2215, TOPIC_22, "Верно.", ['Ацетил участвует в кетогенезе', '...', '...', '...'], 0, "Да."),
        createQ(2216, TOPIC_22, "Длительное голодание.", ['Кетоз', '...', '...', '...'], 0, "Кетоз."),
        createQ(2217, TOPIC_22, "Верно.", ['Кетоацидоз при диабете', '...', '...', '...'], 0, "Да."),
        createQ(2218, TOPIC_22, "Диабетическая кома.", ['Кетоны в крови', '...', '...', '...'], 0, "Кетонемия."),
        createQ(2219, TOPIC_22, "Фермент синтеза.", ['ГМГ-КоА-синтаза', '...', '...', '...'], 0, "Синтаза."),
        createQ(2220, TOPIC_22, "Витамин.", ['HSKoA (Пантотеновая)', '...', '...', '...'], 0, "В5."),
        createQ(2221, TOPIC_22, "Общий метаболит ХС и Кетонов.", ['ГМГ-КоА', '...', '...', '...'], 0, "ГМГ-КоА."),
        createQ(2222, TOPIC_22, "Ацетоацетат -> 3-ГБ.", ['ДГ', '...', '...', '...'], 0, "Дегидрогеназа."),
        createQ(2223, TOPIC_22, "Фермент распада.", ['Тиофораза', '...', '...', '...'], 0, "Сукцинил-КоА-трансфераза."),
        createQ(2224, TOPIC_22, "Фермент ГМГ -> Ацетоацетат.", ['Лиаза', '...', '...', '...'], 0, "ГМГ-КоА-лиаза."),
        createQ(2225, TOPIC_22, "Фермент Ацетоацетат -> 3-ГБ.", ['3-ГБ-ДГ', '...', '...', '...'], 0, "ДГ."),
        createQ(2226, TOPIC_22, "Субстрат тиофоразы.", ['Сукцинил-КоА', '...', '...', '...'], 0, "Сукцинил-КоА."),
        createQ(2227, TOPIC_22, "Субстрат синтазы.", ['Ацетоацетил-КоА', '...', '...', '...'], 0, "Ацетоацетил-КоА + Ацетил-КоА."),
        createQ(2228, TOPIC_22, "Субстрат лиазы.", ['ГМГ-КоА', '...', '...', '...'], 0, "ГМГ-КоА."),
        createQ(2229, TOPIC_22, "Декарбоксилирование ацетоацетата.", ['Ацетон', '...', '...', '...'], 0, "Ацетон."),
        createQ(2230, TOPIC_22, "Восстановление ацетоацетата.", ['3-Гидроксибутират', '...', '...', '...'], 0, "3-ГБ."),
        createQ(2231, TOPIC_22, "Признак комы.", ['Запах ацетона', '...', '...', '...'], 0, "Ацетон."),
        createQ(2232, TOPIC_22, "Причина кетоацидоза.", ['Дефицит инсулина', '...', '...', '...'], 0, "Дефицит инсулина."),
        createQ(2233, TOPIC_22, "Инсулинотерапия.", ['Снижает кетоны', '...', '...', '...'], 0, "Тормозит липолиз -> меньше кетонов."),
        createQ(2234, TOPIC_22, "Синтез кетонов в цитоплазме?", ['Нет, в митохондриях', 'Да', '...', '...'], 0, "Митохондрии."),
        createQ(2235, TOPIC_22, "Усиление кетогенеза.", ['Голод', '...', '...', '...'], 0, "Голод."),
        createQ(2236, TOPIC_22, "Изменение pH.", ['Ацидоз', '...', '...', '...'], 0, "Ацидоз."),
        createQ(2237, TOPIC_22, "Избыток Ацетил-КоА.", ['Кетогенез', '...', '...', '...'], 0, "Идет в кетоны."),
        createQ(2238, TOPIC_22, "Фермент ЦТК и кетолиза.", ['Сукцинил-КоА', '...', '...', '...'], 0, "Сукцинил-КоА."),
        createQ(2239, TOPIC_22, "Печень не использует кетоны.", ['Нет тиофоразы', '...', '...', '...'], 0, "Нет фермента."),
        createQ(2240, TOPIC_22, "Кетоны в сердце.", ['Окисляются', '...', '...', '...'], 0, "Энергия."),
        createQ(2241, TOPIC_22, "Активация кетонов.", ['Сукцинил-КоА', '...', '...', '...'], 0, "Донор КоА."),
        createQ(2242, TOPIC_22, "Кетоз при.", ['Безуглеводной диете', '...', '...', '...'], 0, "Кето-диета."),
        createQ(2243, TOPIC_22, "Выведение.", ['Почки/Легкие', '...', '...', '...'], 0, "Моча/Дыхание."),
        createQ(2244, TOPIC_22, "Кетогенная диета.", ['Жиры', '...', '...', '...'], 0, "Много жиров."),
        createQ(2245, TOPIC_22, "Требует.", ['Жиров', '...', '...', '...'], 0, "Жиров."),

        // --- РАЗДЕЛ 23 (28 вопросов) ---
        createQ(2301, TOPIC_23, "Предшественник ПГ.", ['Олеиновая', 'Пальмитиновая', 'Стеариновая', 'Арахидоновая'], 3, "Арахидоновая."),
        createQ(2302, TOPIC_23, "Предшественник.", ['...', '...', '...', 'Арахидоновая'], 3, "Арахидоновая."),
        createQ(2303, TOPIC_23, "Эйкозаноиды.", ['ПГ, ЛТ, ТХ', '...', '...', '...'], 0, "Простагландины, Лейкотриены."),
        createQ(2304, TOPIC_23, "ПГЕ2 вызывает.", ['Сокращение матки', '...', '...', '...'], 0, "Гладкие мышцы."),
        createQ(2305, TOPIC_23, "Тромбоксан.", ['Агрегация', '...', '...', '...'], 0, "Агрегация тромбоцитов."),
        createQ(2306, TOPIC_23, "Простациклин.", ['Антиагрегант', '...', '...', '...'], 0, "Расширяет сосуды."),
        createQ(2307, TOPIC_23, "Циклооксигеназа.", ['Синтез ПГ', 'Синтез ЛТ', '...', '...'], 0, "ПГ и ТХ."),
        createQ(2308, TOPIC_23, "Атомов в эйкозаноидах.", ['20', '18', '16', '22'], 0, "20 (Eicosa = 20)."),
        createQ(2309, TOPIC_23, "Липоксигеназа.", ['Синтез ЛТ', '...', '...', '...'], 0, "Лейкотриены."),
        createQ(2310, TOPIC_23, "Лейкотриены.", ['Бронхоспазм', '...', '...', '...'], 0, "Астма."),
        createQ(2311, TOPIC_23, "ТХА2.", ['Сужение сосудов', '...', '...', '...'], 0, "Вазоконстрикция."),
        createQ(2312, TOPIC_23, "Фермент фосфолипаза А2.", ['Освобождает арахидоновую', '...', '...', '...'], 0, "Лимитирующая стадия."),
        createQ(2313, TOPIC_23, "Гепарин.", ['Активирует ЛПЛ', '...', '...', '...'], 0, "Антикоагулянт."),
        createQ(2314, TOPIC_23, "Фосфолипаза А2 расщепляет.", ['2 положение', '1 положение', '...', '...'], 0, "Вторая позиция."),
        createQ(2315, TOPIC_23, "Арахидоновая в мембране.", ['Фосфолипиды', '...', '...', '...'], 0, "В составе ФЛ."),
        createQ(2316, TOPIC_23, "Карбоксильная группа.", ['C1', '...', '...', '...'], 0, "Кислота."),
        createQ(2317, TOPIC_23, "Число двойных связей.", ['4', '3', '2', '1'], 0, "4 (С20:4)."),
        createQ(2318, TOPIC_23, "Глюкокортикоиды ингибируют.", ['Фосфолипазу А2', 'ЦОГ', 'ЛОГ', '...'], 0, "Через липокортины."),
        createQ(2319, TOPIC_23, "Аспирин ингибирует.", ['ЦОГ', 'ФЛ-А2', 'ЛОГ', '...'], 0, "Циклооксигеназу."),
        createQ(2320, TOPIC_23, "ЦОГ синтезирует.", ['ПГ, ТХ', 'ЛТ', '...', '...'], 0, "Простаноиды."),
        createQ(2321, TOPIC_23, "Диклофенак.", ['ЦОГ', '...', '...', '...'], 0, "ЦОГ."),
        createQ(2322, TOPIC_23, "Преднизолон.", ['Фосфолипаза А2', '...', '...', '...'], 0, "ФЛ-А2."),
        createQ(2323, TOPIC_23, "Индометацин.", ['ЦОГ', '...', '...', '...'], 0, "ЦОГ."),
        createQ(2324, TOPIC_23, "Целекоксиб.", ['ЦОГ-2', '...', '...', '...'], 0, "Селективный ЦОГ-2."),
        createQ(2325, TOPIC_23, "Антиагрегантный эффект аспирина.", ['Блок ТХА2', '...', '...', '...'], 0, "Тромбоксан."),
        createQ(2326, TOPIC_23, "Глюкокортикоиды vs Аспирин.", ['Лейкотриены', 'ПГ', 'ТХ', '...'], 0, "Лейкотриены (ГК блокируют всё, Аспирин только ПГ/ТХ)."),
        createQ(2327, TOPIC_23, "Арахидоновая.", ['Для эйкозаноидов', '...', '...', '...'], 0, "Субстрат."),
        createQ(2328, TOPIC_23, "Эндотелий.", ['Простациклин', 'ТХ', 'ЛТ', '...'], 0, "PGI2.")
    ];

    // --- 2. STATE & LOGIC ---
    let state = {
        view: 'menu', // menu, learn, quiz, cards, mistakes
        isDark: localStorage.getItem('theme') === 'dark',
        selectedTopics: [],
        progress: JSON.parse(localStorage.getItem('progress') || '{}'),
        currentQIndex: 0,
        quizQuestions: [],
        selectedOption: null,
        isChecked: false,
        streak: 0,
        quizFinished: false,
        showFilter: false,
        // Card specific
        isFlipped: false,
        learnHideAnswers: false,
        expandedExpl: null
    };

    // Topics derivation
    const ALL_TOPICS = [...new Set(BIOCHEM_DATA.map(q => q.topic))];
    
    // Initialize topics if empty
    if (!localStorage.getItem('selectedTopics')) {
        state.selectedTopics = [...ALL_TOPICS];
    } else {
        state.selectedTopics = JSON.parse(localStorage.getItem('selectedTopics'));
    }

    // --- 3. DOM ELEMENTS ---
    const app = document.getElementById('app');

    // --- 4. RENDER FUNCTIONS ---

    function toggleTheme() {
        state.isDark = !state.isDark;
        localStorage.setItem('theme', state.isDark ? 'dark' : 'light');
        render();
    }

    function getFilteredQuestions(mode) {
        let qs = BIOCHEM_DATA.filter(q => state.selectedTopics.includes(q.topic));
        if (mode === 'mistakes') {
            qs = qs.filter(q => state.progress[q.id] === 'wrong');
        }
        return qs;
    }

    function getStats() {
        const learned = Object.values(state.progress).filter(s => s === 'correct').length;
        const errors = Object.values(state.progress).filter(s => s === 'wrong').length;
        return { learned, errors, total: BIOCHEM_DATA.length };
    }

    function startMode(mode) {
        let qs = getFilteredQuestions(mode);
        if (mode === 'quiz' || mode === 'mistakes') {
            qs = qs.sort(() => Math.random() - 0.5);
        }
        state.quizQuestions = qs;
        state.currentQIndex = 0;
        state.quizFinished = false;
        state.streak = 0;
        state.view = mode;
        resetQState();
        render();
    }

    function resetQState() {
        state.selectedOption = null;
        state.isChecked = false;
        state.isFlipped = false;
    }

    function handleOptionClick(idx) {
        if (state.isChecked) return;
        state.selectedOption = idx;
        render();
    }

    function checkAnswer() {
        if (state.selectedOption === null) return;
        state.isChecked = true;
        const q = state.quizQuestions[state.currentQIndex];
        const isCorrect = state.selectedOption === q.correctIndex;
        
        if (isCorrect) {
            state.streak++;
            state.progress[q.id] = 'correct';
        } else {
            state.streak = 0;
            state.progress[q.id] = 'wrong';
        }
        localStorage.setItem('progress', JSON.stringify(state.progress));
        render();
    }

    function nextQuestion() {
        if (state.currentQIndex < state.quizQuestions.length - 1) {
            state.currentQIndex++;
            resetQState();
        } else {
            state.quizFinished = true;
        }
        render();
    }

    function renderHeader() {
        const isDark = state.isDark;
        document.body.className = isDark ? 'bg-black text-white min-h-screen' : 'bg-slate-50 text-slate-900 min-h-screen';
        
        return `
        <div class="sticky top-0 z-30 bg-white/90 dark:bg-black/90 backdrop-blur border-b border-slate-200 dark:border-slate-800 px-4 py-3 flex justify-between items-center h-[60px]">
            <div class="flex items-center gap-2 cursor-pointer" onclick="state.view = 'menu'; render()">
                ${state.view !== 'menu' ? `<i data-lucide="chevron-left" class="w-6 h-6"></i>` : ''}
                <div class="font-black text-2xl tracking-tighter flex items-center">
                    <span class="text-indigo-600 dark:text-indigo-400 mr-1">I</span>med
                </div>
            </div>
            <div class="flex gap-4">
                <button onclick="toggleTheme()">
                    <i data-lucide="${isDark ? 'sun' : 'moon'}" class="w-6 h-6 text-slate-500 hover:text-indigo-500 transition-colors"></i>
                </button>
            </div>
        </div>
        `;
    }

    function renderMenu() {
        const stats = getStats();
        const conspectCount = getFilteredQuestions('learn').length;
        
        // Topic Counts
        const topicCounts = {};
        BIOCHEM_DATA.forEach(q => {
            topicCounts[q.topic] = (topicCounts[q.topic] || 0) + 1;
        });

        const filterModal = state.showFilter ? `
        <div class="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in" onclick="state.showFilter=false; render()">
            <div class="bg-white dark:bg-slate-900 w-full sm:w-[400px] sm:rounded-3xl rounded-t-3xl p-6 shadow-2xl animate-slide-up" onclick="event.stopPropagation()">
                <div class="flex justify-between mb-4">
                    <h3 class="font-bold text-xl">Темы</h3>
                    <button onclick="state.showFilter=false; render()"><i data-lucide="x"></i></button>
                </div>
                <div class="max-h-[60vh] overflow-y-auto space-y-2 mb-4 no-scrollbar">
                    <button onclick="state.selectedTopics = (state.selectedTopics.length === ALL_TOPICS.length) ? [] : [...ALL_TOPICS]; localStorage.setItem('selectedTopics', JSON.stringify(state.selectedTopics)); render()" class="w-full p-3 bg-slate-100 dark:bg-slate-800 rounded-xl font-bold text-sm flex justify-between">
                        <span>Выбрать все</span>
                        <i data-lucide="${state.selectedTopics.length === ALL_TOPICS.length ? 'check-circle' : 'circle'}"></i>
                    </button>
                    ${ALL_TOPICS.map(t => `
                        <button onclick="toggleTopic('${t}')" class="w-full p-3 rounded-xl font-bold text-sm flex justify-between text-left transition-colors ${state.selectedTopics.includes(t) ? 'bg-indigo-600 text-white' : 'bg-white dark:bg-slate-900 border dark:border-slate-700'}">
                            <span>${t} (${topicCounts[t]})</span>
                            ${state.selectedTopics.includes(t) ? '<i data-lucide="check" class="w-4 h-4"></i>' : ''}
                        </button>
                    `).join('')}
                </div>
                <button onclick="state.showFilter=false; render()" class="w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold">Применить</button>
            </div>
        </div>
        ` : '';

        return `
        <div class="p-4 space-y-6 pb-20 animate-in slide-in-from-bottom-4 duration-500">
            <div class="bg-black dark:bg-slate-900 rounded-[2rem] p-8 text-white shadow-xl relative overflow-hidden">
                <h1 class="text-3xl font-black mb-2">Биохимия</h1>
                <p class="text-slate-400 text-sm mb-6">Вопросы и ответы (354)</p>
                <button onclick="state.showFilter = true; render()" class="flex items-center gap-2 bg-white/10 px-4 py-2 rounded-xl text-sm font-bold hover:bg-white/20 transition">
                    <i data-lucide="filter" class="w-4 h-4"></i>
                    ${state.selectedTopics.length === ALL_TOPICS.length ? 'Все темы' : `${state.selectedTopics.length} выбрано`}
                </button>
            </div>

            <div class="space-y-3">
                <button onclick="startMode('learn')" class="w-full bg-white dark:bg-slate-900 p-5 rounded-2xl border dark:border-slate-800 shadow-sm flex items-center justify-between group">
                    <div class="flex items-center gap-4">
                        <div class="bg-yellow-100 dark:bg-yellow-900/30 p-3 rounded-xl text-yellow-600"><i data-lucide="book-open"></i></div>
                        <div class="text-left">
                            <span class="block font-bold text-lg">Конспект (${conspectCount})</span>
                            <span class="text-xs text-slate-500 uppercase font-bold">Учить</span>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" class="text-slate-300"></i>
                </button>

                <button onclick="startMode('quiz')" class="w-full bg-white dark:bg-slate-900 p-5 rounded-2xl border dark:border-slate-800 shadow-sm flex items-center justify-between group">
                    <div class="flex items-center gap-4">
                        <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-xl text-blue-600"><i data-lucide="flask-conical"></i></div>
                        <div class="text-left">
                            <span class="block font-bold text-lg">Тест</span>
                            <span class="text-xs text-slate-500 uppercase font-bold">Проверка</span>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" class="text-slate-300"></i>
                </button>

                <div class="grid grid-cols-2 gap-3">
                    <button onclick="startMode('cards')" class="bg-white dark:bg-slate-900 p-5 rounded-2xl border dark:border-slate-800 shadow-sm flex flex-col items-center justify-center gap-3">
                        <div class="bg-emerald-100 dark:bg-emerald-900/30 p-3 rounded-xl text-emerald-600"><i data-lucide="layers"></i></div>
                        <span class="font-bold">Карточки</span>
                    </button>
                    <button onclick="startMode('mistakes')" class="bg-white dark:bg-slate-900 p-5 rounded-2xl border dark:border-slate-800 shadow-sm flex flex-col items-center justify-center gap-3">
                        <div class="bg-rose-100 dark:bg-rose-900/30 p-3 rounded-xl text-rose-600"><i data-lucide="alert-triangle"></i></div>
                        <span class="font-bold">Ошибки</span>
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 pt-2">
                <div class="bg-white dark:bg-slate-900 p-4 rounded-2xl text-center border dark:border-slate-800">
                    <span class="text-2xl font-black block">${stats.learned}</span>
                    <span class="text-[10px] uppercase font-bold text-slate-400">Выучено</span>
                </div>
                <div class="bg-white dark:bg-slate-900 p-4 rounded-2xl text-center border dark:border-slate-800">
                    <span class="text-2xl font-black block">${stats.errors}</span>
                    <span class="text-[10px] uppercase font-bold text-slate-400">Ошибок</span>
                </div>
            </div>
            ${filterModal}
        </div>
        `;
    }

    function toggleTopic(t) {
        if (state.selectedTopics.includes(t)) {
            state.selectedTopics = state.selectedTopics.filter(x => x !== t);
        } else {
            state.selectedTopics.push(t);
        }
        localStorage.setItem('selectedTopics', JSON.stringify(state.selectedTopics));
        render();
    }

    function renderLearn() {
        const qs = getFilteredQuestions('learn');
        
        return `
        <div class="p-4 pb-20">
            <div class="flex justify-between items-center mb-6">
                <h2 class="font-black text-2xl">Конспект</h2>
                <button onclick="state.learnHideAnswers=!state.learnHideAnswers; render()" class="px-4 py-2 rounded-xl text-xs font-bold border dark:border-slate-700 ${state.learnHideAnswers ? 'bg-black text-white dark:bg-white dark:text-black' : ''}">
                    ${state.learnHideAnswers ? 'Показать' : 'Скрыть'}
                </button>
            </div>
            <div class="space-y-6">
                ${qs.map((q, idx) => `
                    <div class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm">
                        <div class="bg-slate-50 dark:bg-slate-800/50 p-2 text-center border-b dark:border-slate-800">
                            <span class="text-xs font-bold text-slate-400 uppercase">Вопрос ${idx+1}</span>
                        </div>
                        <div class="p-5 border-b dark:border-slate-800">
                            <p class="font-bold leading-snug">${q.question}</p>
                        </div>
                        <div class="divide-y dark:divide-slate-800">
                            ${q.options.map((opt, optIdx) => {
                                const isCorrect = optIdx === q.correctIndex;
                                const highlight = !state.learnHideAnswers && isCorrect;
                                return `
                                <div class="flex text-sm">
                                    <div class="w-10 shrink-0 flex items-center justify-center border-r dark:border-slate-800 font-bold ${highlight ? 'bg-amber-400 text-black' : 'text-slate-400'}">
                                        ${optIdx + 1}
                                    </div>
                                    <div class="flex-1 p-3 ${highlight ? 'bg-amber-100 dark:bg-amber-900/40 font-medium' : ''}">
                                        ${opt}
                                    </div>
                                </div>
                                `;
                            }).join('')}
                        </div>
                        ${!state.learnHideAnswers ? `
                        <button onclick="state.expandedExpl = state.expandedExpl === ${q.id} ? null : ${q.id}; render()" class="w-full text-left p-3 text-xs font-bold text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 transition">
                            Почему так?
                        </button>
                        ${state.expandedExpl === q.id ? `<div class="p-4 bg-slate-50 dark:bg-slate-800 text-sm text-slate-600 dark:text-slate-300 animate-in fade-in">${q.explanation}</div>` : ''}
                        ` : ''}
                    </div>
                `).join('')}
            </div>
        </div>
        `;
    }

    function renderQuiz() {
        if (state.quizQuestions.length === 0) return renderEmpty();
        if (state.quizFinished) return renderFinished();

        const q = state.quizQuestions[state.currentQIndex];
        const percent = ((state.currentQIndex + 1) / state.quizQuestions.length) * 100;

        return `
        <div class="flex flex-col h-[calc(100vh-60px)]">
            <div class="h-1 bg-slate-200 dark:bg-slate-800 w-full">
                <div class="h-full bg-indigo-600 transition-all duration-300" style="width: ${percent}%"></div>
            </div>
            
            <div class="flex-1 overflow-y-auto p-6 pb-32">
                <div class="flex justify-between items-center mb-6">
                    <span class="text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded text-slate-500">${q.topic}</span>
                    <span class="text-xs font-bold text-slate-400">${state.currentQIndex + 1} / ${state.quizQuestions.length}</span>
                </div>

                <h3 class="text-xl font-bold mb-8 leading-snug">${q.question}</h3>

                <div class="space-y-3">
                    ${q.options.map((opt, idx) => {
                        let cls = "w-full p-4 rounded-xl text-left font-medium border-2 transition-all relative ";
                        if (!state.isChecked) {
                            cls += state.selectedOption === idx 
                                ? "border-black bg-black text-white dark:border-white dark:bg-white dark:text-black shadow-lg transform scale-[1.02]" 
                                : "border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 hover:bg-slate-50 dark:hover:bg-slate-800";
                        } else {
                            if (idx === q.correctIndex) cls += "border-emerald-500 bg-emerald-500 text-white border-transparent";
                            else if (idx === state.selectedOption) cls += "border-rose-500 bg-rose-500 text-white border-transparent";
                            else cls += "border-transparent opacity-50 bg-slate-100 dark:bg-slate-800";
                        }
                        return `<button onclick="handleOptionClick(${idx})" class="${cls}" ${state.isChecked ? 'disabled' : ''}>${opt}</button>`;
                    }).join('')}
                </div>

                ${state.isChecked ? `
                <div class="mt-6 p-5 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm animate-in fade-in slide-in-from-bottom-2">
                    <div class="flex gap-3">
                        <div class="text-yellow-500"><i data-lucide="zap"></i></div>
                        <div class="text-sm">
                            <span class="block font-bold mb-1">Разбор</span>
                            ${q.explanation}
                        </div>
                    </div>
                </div>
                ` : ''}
            </div>

            <div class="fixed bottom-0 left-0 w-full bg-white/80 dark:bg-black/80 backdrop-blur border-t border-slate-200 dark:border-slate-800 p-4 safe-pb z-20">
                <div class="max-w-md mx-auto">
                    ${!state.isChecked ? `
                        <button onclick="checkAnswer()" ${state.selectedOption === null ? 'disabled' : ''} class="w-full py-4 rounded-xl font-bold text-lg transition-transform active:scale-95 ${state.selectedOption !== null ? 'bg-black text-white dark:bg-white dark:text-black shadow-lg' : 'bg-slate-200 text-slate-400 dark:bg-slate-800 dark:text-slate-600'}">Проверить</button>
                    ` : `
                        <button onclick="nextQuestion()" class="w-full py-4 rounded-xl font-bold text-lg bg-black text-white dark:bg-white dark:text-black shadow-lg flex items-center justify-center gap-2 active:scale-95">
                            ${state.currentQIndex === state.quizQuestions.length - 1 ? 'Завершить' : 'Дальше'} <i data-lucide="arrow-right" class="w-5 h-5"></i>
                        </button>
                    `}
                </div>
            </div>
        </div>
        `;
    }

    function renderCards() {
        if (state.quizQuestions.length === 0) return renderEmpty();
        const q = state.quizQuestions[state.currentQIndex];

        return `
        <div class="h-[calc(100vh-60px)] flex flex-col p-4">
            <div class="flex-1 flex items-center justify-center perspective-1000 my-4">
                <div class="relative w-full max-w-sm aspect-[3/4] cursor-pointer preserve-3d transition-transform duration-500 ${state.isFlipped ? 'rotate-y-180' : ''}" onclick="state.isFlipped = !state.isFlipped; render()">
                    
                    <!-- Front -->
                    <div class="absolute inset-0 backface-hidden bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border dark:border-slate-800 p-8 flex flex-col items-center justify-center text-center">
                        <div class="text-[10px] uppercase font-bold text-slate-400 mb-4 bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-full">${q.topic}</div>
                        <h3 class="text-xl font-bold leading-snug select-none">${q.question}</h3>
                        <div class="mt-auto text-xs font-bold text-slate-400 flex items-center gap-1 opacity-50"><i data-lucide="rotate-cw" class="w-3 h-3"></i> Нажми</div>
                    </div>

                    <!-- Back -->
                    <div class="absolute inset-0 backface-hidden bg-black dark:bg-white text-white dark:text-black rounded-3xl shadow-2xl p-8 flex flex-col items-center justify-center text-center rotate-y-180">
                        <span class="text-[10px] uppercase font-bold opacity-50 mb-4">Ответ</span>
                        <div class="text-2xl font-black mb-6 text-yellow-400 dark:text-indigo-600 select-none">${q.options[q.correctIndex]}</div>
                        <p class="text-sm opacity-80 font-medium leading-relaxed select-none">${q.explanation}</p>
                    </div>
                </div>
            </div>

            <div class="flex gap-4 pb-8 max-w-sm mx-auto w-full">
                <button onclick="if(state.currentQIndex>0){state.currentQIndex--; state.isFlipped=false; render()}" class="flex-1 py-4 rounded-xl font-bold border-2 border-slate-200 dark:border-slate-800 disabled:opacity-50" ${state.currentQIndex === 0 ? 'disabled' : ''}>Назад</button>
                <button onclick="if(state.currentQIndex<state.quizQuestions.length-1){state.currentQIndex++; state.isFlipped=false; render()}else{state.view='menu'; render()}" class="flex-[2] py-4 rounded-xl font-bold bg-black text-white dark:bg-white dark:text-black shadow-lg">
                    ${state.currentQIndex === state.quizQuestions.length - 1 ? 'В меню' : 'Дальше'}
                </button>
            </div>
        </div>
        `;
    }

    function renderEmpty() {
        return `
        <div class="flex flex-col items-center justify-center h-[80vh] text-center p-6">
            <div class="bg-slate-100 dark:bg-slate-800 p-6 rounded-full mb-4 text-slate-400"><i data-lucide="check-circle" class="w-12 h-12"></i></div>
            <h2 class="text-2xl font-black mb-2">Пусто</h2>
            <p class="text-slate-500 mb-8">Вопросов нет или вы прошли все ошибки.</p>
            <button onclick="state.view='menu'; render()" class="bg-black text-white dark:bg-white dark:text-black px-8 py-3 rounded-xl font-bold">В меню</button>
        </div>
        `;
    }

    function renderFinished() {
        return `
        <div class="flex flex-col items-center justify-center h-[80vh] text-center p-6 animate-in zoom-in-95">
            <div class="text-yellow-400 mb-6"><i data-lucide="award" class="w-24 h-24"></i></div>
            <h2 class="text-3xl font-black mb-2">Финиш!</h2>
            <p class="text-slate-500 mb-8 font-medium">Тест пройден.</p>
            <button onclick="state.view='menu'; render()" class="w-full max-w-xs bg-black text-white dark:bg-white dark:text-black py-4 rounded-2xl font-bold shadow-lg">В меню</button>
        </div>
        `;
    }

    function render() {
        app.innerHTML = renderHeader();
        
        if (state.view === 'menu') app.innerHTML += renderMenu();
        else if (state.view === 'learn') app.innerHTML += renderLearn();
        else if (state.view === 'quiz' || state.view === 'mistakes') app.innerHTML += renderQuiz();
        else if (state.view === 'cards') app.innerHTML += renderCards();

        lucide.createIcons();
    }

    // Init
    render();

</script>
</body>
</html>
